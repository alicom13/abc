/*!
 * Atlantis.js v2.0 - Bootstrap 4 Dashboard (Vanilla JS)
 * Replacement for jQuery-based atlantis.min.js
 * Bootstrap 4 CSS only - No jQuery required
 * (c) 2025 - License: MIT
 */
class Atlantis{constructor(e={}){this.config={sidebarBg:"dark",animationSpeed:300,...e},this.state={sidebarMinimized:"minimized"===localStorage.getItem("atlantis_sidebar"),dropdowns:new Set},this.init()}init(){this.initLayout(),this.initSidebar(),this.initNavigation(),this.initComponents(),this.initForms(),this.restoreState()}initLayout(){const e=document.querySelector(".sidebar"),t=document.body;e?.dataset.backgroundColor&&document.documentElement.classList.add("sidebar-color"),t.dataset.image&&(t.style.backgroundImage=`url("${t.dataset.image}")`)}restoreState(){this.state.sidebarMinimized&&document.querySelector(".wrapper")?.classList.add("sidebar_minimize")}initSidebar(){const e=document.querySelector(".toggle-sidebar");e&&(e.onclick=()=>{const t=document.querySelector(".wrapper").classList.toggle("sidebar_minimize"),o=e.querySelector("i");o&&(o.className=t?"fas fa-ellipsis-v":"fas fa-bars"),this.state.sidebarMinimized=t,localStorage.setItem("atlantis_sidebar",t?"minimized":"expanded")});const t=document.querySelector(".sidebar");t&&(t.onmouseenter=()=>{document.querySelector(".wrapper")?.classList.add("sidebar_minimize_hover")},t.onmouseleave=()=>{document.querySelector(".wrapper")?.classList.remove("sidebar_minimize_hover")});const o=document.querySelector(".sidenav-overlay-toggler");if(o){const e=document.querySelector(".wrapper");if(e.classList.contains("is-show")){o.classList.add("toggled");const e=o.querySelector("i");e&&(e.className="fas fa-ellipsis-v")}o.onclick=()=>{const t=e.classList.toggle("is-show");o.classList.toggle("toggled");const s=o.querySelector("i");s&&(s.className=t?"fas fa-ellipsis-v":"fas fa-bars")}}}initNavigation(){const e=document.querySelector(".sidenav-toggler");e&&(e.onclick=()=>{document.documentElement.classList.toggle("nav_open"),e.classList.toggle("toggled")});const t=document.querySelector(".topbar-toggler");t&&(t.onclick=()=>{document.documentElement.classList.toggle("topbar_open"),t.classList.toggle("toggled")}),this.initQuickSidebar(),this.initPageSidebar(),document.querySelectorAll(".nav-item > a").forEach(e=>{e.onclick=function(e){const t=this.closest(".nav-item"),o=t.querySelector(".collapse");o&&t.classList.toggle("submenu",!o.classList.contains("show"))}}),this.initDropdowns(),this.initChat()}initQuickSidebar(){const e=document.querySelector(".quick-sidebar-toggler");e&&(e.onclick=()=>{const t=document.documentElement.classList.toggle("quick_sidebar_open");if(e.classList.toggle("toggled"),t){const e=document.createElement("div");e.className="quick-sidebar-overlay",e.onclick=()=>this.closeQuickSidebar(),document.body.appendChild(e)}else document.querySelector(".quick-sidebar-overlay")?.remove()},document.querySelector(".close-quick-sidebar")?.addEventListener("click",()=>{this.closeQuickSidebar()}))}closeQuickSidebar(){document.documentElement.classList.remove("quick_sidebar_open"),document.querySelector(".quick-sidebar-toggler")?.classList.remove("toggled"),document.querySelector(".quick-sidebar-overlay")?.remove()}initPageSidebar(){const e=document.querySelector(".page-sidebar-toggler");e&&(e.onclick=()=>{document.documentElement.classList.toggle("pagesidebar_open"),e.classList.toggle("toggled")},document.querySelector(".page-sidebar .back")?.addEventListener("click",()=>{document.documentElement.classList.remove("pagesidebar_open"),e.classList.remove("toggled")}))}initDropdowns(){document.addEventListener("click",e=>{const t=e.target.closest(".dropdown-toggle");if(t){e.preventDefault(),e.stopPropagation();const o=t.closest(".dropdown").querySelector(".dropdown-menu");if(o){const e=o.classList.contains("show");this.closeAllDropdowns(),e||(o.classList.add("show"),this.state.dropdowns.add(o))}}else e.target.closest(".dropdown-menu")||this.closeAllDropdowns()})}closeAllDropdowns(){document.querySelectorAll(".dropdown-menu.show").forEach(e=>{e.classList.remove("show")}),this.state.dropdowns.clear()}initChat(){document.querySelectorAll(".messages-contact .user a").forEach(e=>{e.onclick=()=>{document.querySelector(".tab-chat")?.classList.add("show-chat")}}),document.querySelectorAll(".messages-wrapper .return").forEach(e=>{e.onclick=()=>{document.querySelector(".tab-chat")?.classList.remove("show-chat")}})}initComponents(){this.initModals(),this.initTooltips(),this.initCollapse(),this.initTabs(),this.initScrollbars(),this.initCards()}initModals(){document.addEventListener("click",e=>{const t=e.target.closest('[data-toggle="modal"]');if(t){e.preventDefault();const o=t.dataset.target||t.getAttribute("href");this.showModal(o)}const o=e.target.closest('[data-dismiss="modal"]');if(o){const e=o.closest(".modal");e&&this.hideModal(e)}e.target.classList.contains("modal")&&this.hideModal(e.target)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.querySelectorAll(".modal.show").forEach(e=>{this.hideModal(e)})})}showModal(e){const t=document.querySelector(e);if(t&&(t.classList.add("show"),t.style.display="block",document.body.classList.add("modal-open"),!document.querySelector(".modal-backdrop"))){const e=document.createElement("div");e.className="modal-backdrop fade show",document.body.appendChild(e)}}hideModal(e){e.classList.remove("show"),e.style.display="none",document.body.classList.remove("modal-open"),document.querySelector(".modal-backdrop")?.remove()}initTooltips(){document.querySelectorAll('[data-toggle="tooltip"]').forEach(e=>{e.addEventListener("mouseenter",()=>{const t=e.dataset.originalTitle||e.title;if(!t)return;const o=document.createElement("div");o.className="tooltip bs-tooltip-top show",o.innerHTML=`\n                    <div class="arrow"></div>\n                    <div class="tooltip-inner">${t}</div>\n                `,o.id="atlantis-tooltip",document.body.appendChild(o);const s=e.getBoundingClientRect();o.style.position="fixed",o.style.top=s.top-o.offsetHeight-8+"px",o.style.left=s.left+s.width/2-o.offsetWidth/2+"px",o.style.zIndex="9999"}),e.addEventListener("mouseleave",()=>{document.getElementById("atlantis-tooltip")?.remove()})})}initCollapse(){document.addEventListener("click",e=>{const t=e.target.closest('[data-toggle="collapse"]');if(!t)return;e.preventDefault();const o=t.dataset.target||t.getAttribute("href"),s=document.querySelector(o);if(s){const e=s.classList.contains("show"),o=s.closest(".accordion");o&&o.querySelectorAll(".collapse.show").forEach(e=>{e!==s&&e.classList.remove("show")}),s.classList.toggle("show",!e),t.setAttribute("aria-expanded",!e)}})}initTabs(){document.querySelectorAll(".nav-tabs .nav-link, .nav-pills .nav-link").forEach(e=>{e.onclick=t=>{t.preventDefault();const o=e.getAttribute("href"),s=document.querySelector(o);if(s){e.closest(".nav").querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("active")});const t=s.closest(".tab-content");t&&t.querySelectorAll(".tab-pane").forEach(e=>{e.classList.remove("show","active")}),e.classList.add("active"),s.classList.add("show","active")}}})}initScrollbars(){[".sidebar .scrollbar",".main-panel .content-scroll",".messages-scroll",".tasks-scroll",".quick-scroll",".message-notif-scroll",".notif-scroll",".quick-actions-scroll",".dropdown-user-scroll"].forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.style.overflowY="auto",e.style.scrollbarWidth="thin"})})}initCards(){document.querySelectorAll(".btn-refresh-card").forEach(e=>{e.onclick=()=>{const t=e.closest(".card");t&&(t.classList.add("is-loading"),setTimeout(()=>t.classList.remove("is-loading"),3e3))}})}initForms(){document.querySelectorAll(".form-group-default .form-control").forEach(e=>{e.onfocus=()=>e.parentElement.classList.add("active"),e.onblur=()=>e.parentElement.classList.remove("active")}),document.querySelectorAll(".nav-search .input-group > input").forEach(e=>{e.onfocus=()=>e.parentElement.classList.add("focus"),e.onblur=()=>e.parentElement.classList.remove("focus")}),document.querySelectorAll('.input-file-image input[type="file"]').forEach(e=>{e.onchange=function(){if(this.files?.[0]){const t=new FileReader;t.onload=t=>{const o=e.closest(".input-file-image").querySelector(".img-upload-preview");o&&(o.src=t.target.result)},t.readAsDataURL(this.files[0])}}}),document.querySelectorAll(".show-password").forEach(e=>{e.onclick=function(){const e=this.closest(".input-group").querySelector("input"),t=this.querySelector("i");"password"===e.type?(e.type="text",t&&(t.className="fas fa-eye-slash")):(e.type="password",t&&(t.className="fas fa-eye"))}}),document.querySelectorAll(".form-floating-label .form-control").forEach(e=>{e.onkeyup=function(){this.classList.toggle("filled",""!==this.value)},e.value&&e.classList.add("filled")}),document.querySelectorAll('[data-select="checkbox"]').forEach(e=>{e.onchange=function(){const e=this.dataset.target;document.querySelectorAll(e).forEach(e=>{e.checked=this.checked})}}),this.initLoginToggle()}initLoginToggle(){const e=document.getElementById("show-signup"),t=document.getElementById("show-signin");if(!e||!t)return;const o=document.querySelector(".container-login"),s=document.querySelector(".container-signup");let i=!0;const l=()=>{o.style.display=i?"block":"none",s.style.display=i?"none":"block"};e.onclick=e=>{e.preventDefault(),i=!1,l()},t.onclick=e=>{e.preventDefault(),i=!0,l()},l()}toggleSidebar(){document.querySelector(".toggle-sidebar")?.click()}refreshCard(e){"string"==typeof e&&(e=document.querySelector(e)),e&&(e.classList.add("is-loading"),setTimeout(()=>e.classList.remove("is-loading"),3e3))}showNotification(e,t="info"){const o=document.createElement("div");o.className=`alert alert-${t} atlantis-notification`,o.textContent=e,o.style.cssText="position:fixed;top:20px;right:20px;z-index:9999;min-width:250px;animation:slideIn .3s",document.body.appendChild(o),setTimeout(()=>{o.style.animation="slideOut .3s",setTimeout(()=>o.remove(),300)},3e3)}destroy(){this.closeAllDropdowns(),document.querySelectorAll(".modal.show").forEach(e=>this.hideModal(e)),document.getElementById("atlantis-tooltip")?.remove()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.atlantis=new Atlantis}):window.atlantis=new Atlantis,"undefined"!=typeof module&&module.exports&&(module.exports=Atlantis);